<!----------------------------------------------------------------------------------------------------------->
<!-- Page Content(similar to <body> check out index.html to see structure) ---------------------------------->
<ion-content scrollbarStyle
             fullscreen="true"
             scrollX="false">


  <!--*** This Page Contains both a View Mode and an Update Mode ***-->
  <ng-container [ngSwitch]="isViewOnlyMode">


    <!--------------------------------------------------------------------------------------------------------->
    <!-- IS VIEW ONLY MODE ------------------------------------------------------------------------------------>
    <ng-template [ngSwitchCase]="true">
      <div addOrRemoveClassOnIntersection
           className="expand-navbar"
           elementId="navbarElement"
           (addOrRemoveClassEvent)="addOrRemoveClassEvent($event)"
           style="top: -1px; padding-top: 32px; margin-bottom: -32px;"></div>
      <!------------------------------------------------------------------------------------------------------->
      <!-- Container for page content adds margin based on side menu ------------------------------------------>
      <main #scrollArea>

        <!-- Waves Background Header  --------------------------------------->
        <cstm-waves-background [animated]="false"
                               color1="#ffffffB3"
                               color2="#ffffff80"
                               color3="#ffffff4C"
                               color4="#ffffff"
                               backgroundColor1="rgba(81, 45, 168, 1)"
                               backgroundColor2="rgba(48, 51, 107, 1)">
          <h1 style="font-size: 44px;  margin-top: 18vh;">Access Detail</h1>
        </cstm-waves-background>




        <ion-grid style="margin-bottom: 36vh; margin-top: 12vh;">
          <ion-row class="ion-justify-content-center max-width-1080">
            <ion-col size="6">
              <div style="position: relative; overflow: hidden; width: 100%; height: 400px; /* adjust as needed */">
                <ion-img style=" position: absolute;
                                top: 50%;
                                left: 50%;
                                transform: translate(-50%, -50%);
                                width: 100%;
                                height: 100%;
                                object-fit: cover;"
                         [src]="mainImageUrl"></ion-img>
              </div>
              <ion-row>
                <ion-col *ngFor="let item of thumbnailMedia"
                         size="3">
                  <ion-img style="  height: 80px; /* adjust as needed */
                                    width: auto;
                                    cursor: pointer;
                                    border: 2px solid #f1f1f1;
                                    object-fit: cover;"
                           [src]="item?.downloadUrl"
                           (click)="changeMainImageUrl(item)"></ion-img>
                </ion-col>
              </ion-row>
            </ion-col>
            <ion-col size="6">


              <div class="product-details">
                <h1 class="product-title">{{accessObj?.name}}</h1>
                <h2 class="product-price">1</h2>
                <ion-button style="width: 200px; margin: 0 auto;"
                            class="primary-btn ion-activatable ripple-parent"
                            shape="round"
                            expand="block"
                            mode="ios"
                            fill="solid">
                  <ion-ripple-effect style="display: flex;
                                      justify-content: start;
                                      left: -25px;
                                      right: -25px;">
                  </ion-ripple-effect>
                  Add To cart
                </ion-button>
                <ul class="product-info">
                  <li>Fabric: 100% Tencel</li>
                  <li>Care Instructions: Machine wash cold, tumble dry low</li>
                  <li>Sizing: XS - XL</li>
                </ul>
              </div>
            </ion-col>
          </ion-row>
        </ion-grid>
      </main>
    </ng-template>
    <!--------------------------------------------------------------------------------------------------------->





    <!--------------------------------------------------------------------------------------------------------->
    <!-- IS EDIT MODE ----------------------------------------------------------------------------------------->
    <ng-template ngSwitchDefault
                 [ngSwitchCase]="false">
      <!------------------------------------------------------------------------>
      <!-- ion-header ---------------------------------------------------------->
      <ion-header slot="fixed"
                  style="align-self: start;"
                  class=" ion-no-border" 
                   [class.hideNavBarFlag]="hideNavBarFlag">
        <div class="header-container"
             style="background: rgb(255 255 255 / 50%); margin-left: 5rem;">
          <!-- ion-toolbar -------------------------------->
          <ion-toolbar style="max-width: 1080px; margin: 0 auto;  --background: transparent !important;">
            <!-- Button wrapper on left of header --->
            <ion-buttons slot="secondary">
              <ion-fab-button (click)="goBack()"
                              class="back-btn"
                              size="small"
                              mode="ios">
                <ion-icon name="arrow-back">
                </ion-icon>
              </ion-fab-button>
            </ion-buttons>

            <!-- Page Title ------------------------------------------------->
            <ion-title *ngIf="!isViewOnlyMode"
                       class="page-title text-align-center"
                       color="primary">
              Update Access
            </ion-title>

            <!-- Button wrapper on right of header ----------------->
            <ion-buttons *ngIf="!isViewOnlyMode"
                         slot="primary">
              <ion-fab-button (click)="deleteAccess()"
                              class="add-btn"
                              size="small"
                              color="danger"
                              mode="ios">
                <ion-icon name="trash">
                </ion-icon>
              </ion-fab-button>
            </ion-buttons>
          </ion-toolbar>
        </div>
      </ion-header>



      <!------------------------------------------------------------------------------------------------------->
      <!-- Container for page content adds margin based on side menu ------------------------------------------>
      <main #scrollArea>

        <!--------------------------------------------------------------------------------------------------------->
        <!-- Page Form Container ---------------------------------------------------------------------------------->
        <form style="all: revert;"
              [formGroup]="formObj"
              novalidate>

          <!-- Email Input Row -------------------------------------------------------------------------------->
          <!-- Input Row --------------------------------------------------------------------------------->
          <ion-row class="no-top-bottom-padding max-width-550 ion-justify-content-center">
            <ion-col size="12">
              <!------------------------------------------------------------------------------------------>
              <ion-item [ngClass]="{'errorItem': !formObj.controls['email'].valid && inputTouchedOnce.email}"
                        class="input-container"
                        lines="inset"
                        mode="md">
                <!-- Label Container ------------------------------------------------------>
                <ion-label position="floating">
                  <!-- Label -------------------------------------------------------------->
                  <span *ngIf="!(!formObj.controls['email'].valid && inputTouchedOnce.email)">
                    Email*
                  </span>
                  <!-- On error replace form label with error message ------------------->
                  <span *ngIf="!formObj.controls['email'].valid && inputTouchedOnce.email">
                    Input a valid email
                  </span>
                </ion-label>
                <!-- Form Input --------------------------->
                <ion-input legacy="true"  (ionBlur)="onInputBlur('email')"
                           type="text"
                           formControlName="email">
                </ion-input>
              </ion-item>
            </ion-col>
          </ion-row>




          <ion-row class="no-top-bottom-padding max-width-550 ion-justify-content-center">
            <ion-col size="12">
              <ion-item class="input-container-label-only"
                        lines="none"
                        mode="md">
                <ion-label style="font-size: 16px;
                                    font-weight: 700;
                                    color: var(--ion-color-primary);
                                    margin-bottom: 0;">
                Admin Permissions
                </ion-label>
              </ion-item>

              <ion-item *ngIf="formInitialized"
                        class="input-container"
                        lines="inset"
                        mode="md">
                <div class="ion-text-left"
                     class="ion-align-content-center">
                  <ion-text (click)="onCheckboxSelectionMulti(permission)"
                            style=" cursor: pointer;   font-size: 17px; display: flex; align-items: center; "
                            *ngFor=" let permission of accessPermissionOptionsArray">
                    <ion-checkbox legacy="true"  mode="ios"
                                  style=" width: auto; margin-right: 8px;"
                                  [checked]="formObj.value.permissions.includes(permission)"
                                  class="ion-align-self-start"></ion-checkbox> <span style="margin-right: 8px; color: var(--ion-color-primary);
                                                   font-size: 17px; font-weight: 500 !important;">{{permission}} </span> <br>
                  </ion-text>
                </div>
              </ion-item>
            </ion-col>
          </ion-row>





          <!-- Call To Action Button Row ------------------------------------->
          <ion-row *ngIf="!isMobileView"
                   style="margin-top: 2vmax; margin-bottom: 4vmax;"
                   class="max-width-550 ion-justify-content-center">
            <ion-col size="12">
              <ion-button expand="block"
                          color="primary"
                          (click)="onSubmitForm()">
                <ion-icon name="save"
                          slot="start"></ion-icon>
                Save
              </ion-button>
            </ion-col>
          </ion-row>

          <ion-footer *ngIf="isMobileView"
                      style=" position: fixed; bottom: 0; width: 100%; z-index: 999;"
                      class="ion-align-self-end ion-no-border">
            <div class="footer-container">
              <ion-toolbar style="  --background: transparent !important;">
                <ion-row class="no-top-bottom-padding max-width-550 ion-justify-content-center">
                  <ion-col size="12">

                    <ion-button expand="block"
                                color="primary"
                                (click)="onSubmitForm()">
                      <ion-icon name="save"
                                slot="start"></ion-icon>
                      Save
                    </ion-button>
                  </ion-col>
                </ion-row>

                <!-- </ion-grid> -->
              </ion-toolbar>
            </div>
          </ion-footer>
        </form>

      </main>


    </ng-template>
  </ng-container>
</ion-content>
