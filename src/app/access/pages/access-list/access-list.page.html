<!----------------------------------------------------------------------------------------------------------->
<!-- Page Content(similar to <body> check out index.html to see structure) ---------------------------------->
<ion-content [scrollEvents]="true"
             (ionScroll)="handleScroll($any($event))"
             scrollbarStyle
             fullscreen="true"
             scrollX="false">

  <!--------------------------------------------------------------------->
  <!-- ion-header ------------------------------------------------------->
  <ion-header slot="fixed"
              style="align-self: start;"
              class="ion-no-border"
               [class.hideNavBarFlag]="hideNavBarFlag">
    <div class="header-container"
         style="background: rgb(255 255 255 / 50%); margin-left: 5rem;">

      <cstm-waves-background *ngIf="!hideNavBarFlag && isMobileView"
                             [animated]="false"
                             color1="#ffffffB3"
                             color2="#ffffff80"
                             color3="#ffffff4C"
                             color4="#ffffff"
                             backgroundColor1="#05251d"
                             backgroundColor2="#05251d"
                             height="16vh">
        <cstm-glowing-text glowRadius="50px"
                           backgroundColor="transparent"
                           fontSize="10vw"
                           height="none"
                           color1="#FFE7C4"
                           color2="#FFD5A5"
                           color3="#FFC085"
                           text="User&nbsp;Access">
        </cstm-glowing-text>
      </cstm-waves-background>


      <!-- ion-toolbar -------------------------------------------------->
      <ion-toolbar *ngIf="!isMobileView && !hideNavBarFlag"
                   style="max-width: 1080px; margin: 0 auto; ">
        <!-- Page Title ------------------------------------------------->
        <ion-title class="page-title text-align-center"
                   color="primary">
          User Access
        </ion-title>
      </ion-toolbar>

<cstm-waves-background *ngIf="hideNavBarFlag  && isMobileView"
                       style="  transition: all .2s ease 0s;"
                       [animated]="false"
                       color1="#ffffffB3"
                       color2="#ffffff80"
                       color3="#ffffff4C"
                       color4="#ffffff"
                       backgroundColor1="#05251d"
                       backgroundColor2="#05251d"
                       height="12vh">
  <cstm-glowing-text glowRadius="44px"
                     backgroundColor="transparent"
                     fontSize="10vw"
                     height="none"
                     color1="#FFE7C4"
                     color2="#FFD5A5"
                     color3="#FFC085"
                      text="User&nbsp;Access">
  </cstm-glowing-text>
</cstm-waves-background>
    </div>
  </ion-header>


  <!--------------------------------------------------------------------------------------------------------->
  <!-- Container for page content adds margin based on side menu -------------------------------------------->
  <main>

  <!-- Input Row --------------------------------------------------------------------------------->
  <ion-row class="no-top-bottom-padding max-width-550 ion-justify-content-center">
    <ion-col size="12">

      <ion-card>
        <ion-card-header>
          <ion-card-title class="ion-text-center"
                          style="text-transform: capitalize;"> Manage User Access </ion-card-title>

        </ion-card-header>
        <ion-card-content class="ion-text-center">
          You can invite different users and configure the level of access you want them to have.  

          <ion-button (click)="goToCreateAccessPage()"
                      style="margin-top: 1rem; --color: var(--ion-color-secondary);"
                      expand="block"
                      color="primary">
            <ion-icon name="chatbubble-outline"
                      slot="start"></ion-icon>
            Add User Access
          </ion-button>
        </ion-card-content>
      </ion-card>



       <!-- Existing Access List --------------------------------------------------------------------->
       <ion-list *ngIf="accessList?.length > 0  && currentUser?.id?.length > 0">
         <ion-list-header>
           <ion-label>Access List</ion-label>
         </ion-list-header>

         <ion-card (click)="goToAccessDetailPage(access)"
                   *ngFor="let access of accessList; let i = index"
                   class="stylish-card">
           <ion-item lines="none"
                     class="stylish-item"
                     button
                     detail="false">
             <ion-avatar slot="start"
                         class="stylish-avatar">
               <ion-img [src]="(access?._local?.mainMedia?.downloadUrl?.length > 0 ) ? access?._local?.mainMedia?.downloadUrl : '/assets/images/profile.png'"></ion-img>
             </ion-avatar>

             <ion-label class="ion-text-wrap stylish-label">
               <h2>
                 <ion-text color="dark">{{(access?.email)}}</ion-text>
               </h2>
               <p>
                 <!-- <ion-text style="    display: block;
    width: 250px;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    text-transform: capitalize;">
                   {{ access?.linkedCommunity?.name}}
                 </ion-text> -->
               </p>
             </ion-label>
             <div class="footer ">
               <span class="footer-text align-left"
                     style="margin-right: auto !important;">

                                      <ion-button *ngIf="!(access?.name?.length > 0) "
                                                 
                                                  class="ion-align-self-end"
                                                  style="width: 100%; margin: auto;"
                                                  fill="outline">Pending</ion-button>

                                      <ion-button *ngIf="access?.name?.length > 0"
                                                  class="ion-align-self-end"
                                                  style="width: 100%; margin: auto;"
                                                  fill="solid">Accepted</ion-button>
                                      <br>
                 {{access?.createdAt?.timestamp | date:'short'}}

                 <div class="checkMarkContainer">
                   <div class="check-mark-stem"> </div>
                   <div class="check-mark-kick"> </div>
                 </div>
               </span>
             </div>

           </ion-item>


         </ion-card>


       </ion-list>
    </ion-col>
  </ion-row>


  </main>
</ion-content>

